generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  // url      = env("DATABASE_URL")
}

model Participant {
  workerId         String   @id @map("worker_id")
  cond             Int?
  participantOrder Int?     @map("participant_order")
  tz               String?
  consentAt        DateTime? @map("consent_at")

  submissions Submission[]

  @@map("participants")
}

model Day {
  id       String   @id @default(cuid())
  idx      Int      @unique
  dateEt   DateTime @map("date_et")

  @@map("days")
}

model Submission {
  id             String   @id @default(cuid())
  workerId       String   @map("worker_id")
  dayIdx         Int      @map("day_idx")
  taskNumber     Int?     @map("task_number")
  answer         String   @db.Text
  feedback       String?  @db.Text
  scoreA         Int?     @map("score_a")
  scoreB         Int?     @map("score_b")
  rtMs           Int?     @map("rt_ms")
  completionCode String?  @map("completion_code")
  submittedAt    DateTime? @default(now()) @map("submitted_at")

  participant Participant @relation(fields: [workerId], references: [workerId])

  @@unique([workerId, dayIdx])
  @@map("submissions")
}

model GroupGoal {
  id        String   @id @default(cuid())
  dayIdx    Int      @unique @map("day_idx")
  count     Int      @default(0)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("group_goals")
}

model Admin {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String?
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("admins")
}
